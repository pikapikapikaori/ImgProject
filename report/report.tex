%!TEX program = xelatex
\documentclass[12pt,a4paper]{article}
% \documentclass[11pt,a4paper]{report}
% \documentclass[11pt,a4paper]{book}
% \def\mathfamilydefault{\rmdefault}

% 设置页面%==================================================
% \linespread{1}
%行距
% \headsep=2cm
% \textwidth=16cm\textheight=24.2cm
%==================================================

% 其它需要使用的宏包
%==================================================
\usepackage[UTF8,heading=true]{ctex}

\usepackage[colorlinks,linkcolor=blue,anchorcolor=red,citecolor=black,urlcolor=black]{hyperref}  \usepackage{tabularx}
\usepackage{authblk}                   % 作者信息
\usepackage{algorithm}                 % 算法排版
\usepackage{amsmath,amsthm,amssymb}               % 数学符号与公式
\usepackage{amsfonts}                  % 数学符号与字体
\usepackage{graphics}
\usepackage{accents}
\usepackage{color}
\usepackage{setspace}
\usepackage{cite}
\usepackage{changepage}
\usepackage[font=footnotesize]{caption}
\usepackage{fancyhdr}
\usepackage{fancyhdr}                  % 设置页眉页脚
\usepackage{fancyvrb}                  % 抄录环境
\usepackage{float}                     % 管理浮动体
\usepackage[top=3cm,bottom=3cm,left=2.5cm,right=2.5cm]{geometry}           % 定制页面格式
\usepackage{hyperref}                  % 为PDF文档创建超链接
\usepackage{lineno}                    % 生成行号
\usepackage{listings}                  % 插入程序源代码
\usepackage{multicol}                  % 多栏排版
\usepackage{natbib}                    % 管理文献引用
\usepackage{rotating}                  % 旋转文字，图形，表格
\usepackage{subfigure}                 % 排版子图形
\usepackage{titlesec}                  % 改变章节标题格式
\usepackage{moresize}                  % 更多字体大小
\usepackage{anysize}
\usepackage{indentfirst}               % 首段缩进
\usepackage{booktabs}                  % 使用\multicolumn
\usepackage{multirow}                  % 使用\multirow
\usepackage{graphicx}
\usepackage{xcolor}
\usepackage{titlesec}                  % 改变标题样式
\usepackage{enumitem}
\usepackage{parskip}
\usepackage[noend]{algpseudocode}
%==================================================

% 将默认的英文目录等改为中文，设置图号和公式号与章节对应，缩进大小
%==================================================
% \titleformat{\part}[display]{\centering\Huge}{\textbf{第~\thepart~部分}}{0.2cm}{\textbf}
% \titleformat{\chapter}[hang]{\huge}{\textbf{第~\thechapter~章}}{0.2cm}{\textbf}
% \renewcommand{\contentsname}{目 \quad 录}
% \renewcommand{\abstractname}{摘 \quad 要}
% \renewcommand{\appendixname}{附 \quad 录}
% \renewcommand{\theequation}{\arabic{section}.\arabic{equation}}      %公式号与章节对应
% \renewcommand{\figurename}{\normalsize{图 \arabic{section}.\arabic{figure}}}   %改figure为图
% \renewcommand{\refname}{参考文献}
% \renewcommand{\bibname}{参考文献}
% \makeatletter
% \renewcommand{\fnum@figure}[1]{\textbf{\figurename~}\hspace{10pt} \sffamily}   %图号与章节对应
% \makeatother\setlength{\parindent}{2em}       %设置缩进为两个大写M的宽度，大约为两个汉字的宽度
%==================================================

% 设置页眉页脚
%==================================================
% \renewcommand{\headrulewidth}{0.4pt}
% \renewcommand{\footrulewidth}{0.4pt}

% \pagestyle{headings}
% \pagestyle{fancy}
% \lhead{}
% \chead{}
% \rhead{}
% \lfoot{}
% \cfoot{}
% \rfoot{}
%==================================================

% 设置标题格式
%==================================================

\ctexset{
	section={
		%format用于设置章节标题全局格式，作用域为标题和编号
		%字号为二号，字体为宋体，左对齐
		%+号表示在原有格式下附加格式命令
		format+ = \zihao{3} \songti \raggedright,
		name={,\ },
		%beforeskip用于设置章节标题前的垂直间距
		%ex为当前字号下字母x的高度
		%基础高度为1.0ex，可以伸展到1.2ex，也可以收缩到0.8ex
		beforeskip = 1.0ex plus 0.2ex minus .2ex,
		%afterskip用于设置章节标题后的垂直间距
		afterskip = 1.0ex plus 0.2ex minus .2ex,
		%aftername用于控制编号和标题之间的格式
		%\hspace用于增加水平间距
		aftername = \hspace{0pt}
	},
	subsection={
		format+ = \zihao{-3} \songti \raggedright,
		name={,\ },
		%仅输出subsection编号且为中文
		beforeskip = 1.0ex plus 0.2ex minus .2ex,
		afterskip = 1.0ex plus 0.2ex minus .2ex,
		aftername = \hspace{0pt}
	},
	subsubsection={
		%设置对齐方式为居中对齐
		format+ = \zihao{4} \songti \raggedright,
		name={,\ },
		%仅输出subsubsection编号，格式为阿拉伯数字，打字机字体
		beforeskip = 1.0ex plus 0.2ex minus .2ex,
		afterskip = 1.0ex plus 0.2ex minus .2ex,
		aftername = \hspace{0pt}
	}
}

%==================================================

% 设置环境
%==================================================

\newenvironment{cnabstract}
{
{\songti \zihao{-4} \textbf{摘\ 要：}}
% 正文部分设置
\setlength{\baselineskip}{20pt} % 设置行间距为20磅
\songti % 宋体
\zihao{-4} % 小四
}

\newenvironment{keywords}
{
{\songti \zihao{-5} \textbf{关键词：}}
% 正文部分设置
\setlength{\baselineskip}{20pt} % 设置行间距为20磅
\songti % 宋体
\zihao{-5} % 小四
}

%==================================================

% 设置中文字体
%==================================================
%\setCJKmainfont[BoldFont=SimHei,ItalicFont=KaiTi]{SimSun}
\setCJKmainfont{SimSun}[AutoFakeBold]
%\setCJKmainfont[BoldFont={STHeiti}, ItalicFont={STKaiti}]{STSong}

%\setCJKsansfont{SimHei}
%\setCJKsansfont{Songti SC Regular}
%\setCJKsansfont{STHeiti}

%\setCJKmonofont{FangSong}
%\setCJKmonofont{Heiti SC Regular}
%\setCJKmonofont{STFangsong}

%-------------------------------------------------

\setCJKfamilyfont{zhsong}{SimSun}
% \setCJKfamilyfont{zhsong}{Adobe Song Std}
%\setCJKfamilyfont{zhsong}{STSong}

\setCJKfamilyfont{zhhei}{SimHei}
% \setCJKfamilyfont{zhhei}{Adobe Heiti Std}
%\setCJKfamilyfont{zhhei}{STHeiti}

%\setCJKfamilyfont{zhfs}{FangSong}
% \setCJKfamilyfont{zhfs}{Adobe FangSong Std}
%\setCJKfamilyfont{zhfs}{STSong}

%\setCJKfamilyfont{zhkai}{KaiTi}
% \setCJKfamilyfont{zhkai}{Adobe Kaiti Std}
%\setCJKfamilyfont{zhkai}{STKaiti}

%-------------------------------------------------

%\newcommand*{\songti}{\CJKfamily{zhsong}} % 宋体
%\newcommand*{\heiti}{\CJKfamily{zhhei}}   % 黑体
% \newcommand*{\kaishu}{\CJKfamily{zhkai}}  % 楷书
% \newcommand*{\fangsong}{\CJKfamily{zhfs}} % 仿宋

% ！使用如下命令：{\songti 宋体} 可以临时使用宋体（要加大括号）
%==================================================

% 设置英文字体
%==================================================
%\defaultfontfeatures{Scale=MatchLowercase} % 这个参数保证 serif、sans-serif 和 monospace 字体在小写时大小匹配
% \setmainfont[Mapping=tex-text]{CMU Serif} % 使用 XeTeX 的 text-mapping 方案，正确显示 LaTeX 样式的双引号（`` ''）
\setmainfont[Mapping=tex-text]{Times New Roman}
% \setsansfont[Mapping=tex-text]{CMU Sans Serif}
% \setsansfont[Mapping=tex-text]{DejaVu Sans YuanTi}
% \setmonofont{Courier New}
% \setmonofont{Monaco}
% \setmonofont{DejaVu Sans YuanTi}
%==================================================

% 题目，作者，日期
%==================================================
\title{\songti 年龄变换项目报告}

% Style 1
% -------------------------------

%\author[*]{\songti 李亦杨 10195101467}
%\affil[*]{\songti 10195101467}
%\author[**]{\songti 刁泽皓 10195101470}
%\affil[**]{\songti 10195101470}
% Style 2
% -------------------------------
%\author{\songti 李亦杨 10195101467}
%\affil{\songti \zihao{6} 10195101467}
%\author{\songti 刁泽皓 10195101470}
%\affil{affil2}
% Style 3
% -------------------------------
\author{
\songti
\begin{tabular}[t]{c c}
李亦杨 10195101467 & 刁泽皓 10195101470
\end{tabular}
}

\date{}
%==================================================


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% 正文
%==================================================

\begin{document}
% \pagenumbering{Roman}          %页码为大写罗马数字
% \pagenumbering{arabic}         %页码为阿拉伯数字
\pagenumbering{gobble}

\setstretch{1}


\maketitle

% \newpage
% \tableofcontents

\pagestyle{empty}

\begin{adjustwidth}{0.5cm}{0.5cm}
	\begin{cnabstract}
		在此处输入中文摘要（字数一般不少于 500 字）。摘要必须反映全文中心内容，内容应包括目的、过程及方法、结论。要求论述简明、逻辑性强、尽量用短句。采用第三人称的写法，并请用过去时态叙述作者工作，用现在时态叙述作者结论。
	\end{cnabstract}
\end{adjustwidth}

\setlength{\parindent}{2em}
\setlength{\parskip}{0ex}

\section{生成对抗网络}
生成对抗神经网络(Generative Adversarial Networks)于2014年提出，其可以学习数据的分布规律，并创造出可以以假乱真的图像和文本。\textsuperscript{\cite{2014Generative}}


GAN的网络结构分为生成器和辨别器两部分。生成器读取一个随机的噪音输入，并输出一个图片，辨别器判别图片是否为训练集中的图片。当辨别器无法分辨真假（即判别正确的概率为$50\%$）时，训练结束。生成器和辨别器要分别搭建神经网络模型，可以根据实际需求选择卷积神经网络、递归神经网络或全连接神经网络。


GAN的模型训练过程可以大致概括为以下几个步骤：
\begin{enumerate}[itemindent=2em]
	\item 初始化生成器$G$和辨别器$D$两个网络的参数。
	\item 从训练集中抽取$n$个样本，同时让生成器利用定义的噪声$z$分布生成$n$个样本。固定生成器$G$，并训练辨别器$D$，使其尽可能区分真假。
	\item 循环更新$k$次辨别器$D$之后，更新$1$次生成器$G$，使辨别器尽可能地区分不了真假。
\end{enumerate}


在进行多次更新迭代后，理想状态下，只要最终辨别器$D$无法区分出图片到底是来自真实的训练样本集合，还是来自生成器$G$生成的样本即可。此时辨别的概率为$0.5$，完成训练。

迭代过程中的关键点在于损失价值函数的计算，Generative Adversarial Networks一文中提出了其计算公式\textsuperscript{\cite{2014Generative}}：
\begin{align}
	\underaccent{G}{min}\ \underaccent{D}{max}\ V(D, G) = \mathbb{E}_{x \sim p_{data}(x)}[log\ D(x)] + \mathbb{E}_{z \sim p_{z}(z)}[log(1-D(G(z)))]
\end{align}


其中真实数据$x$服从$p_{data}$分布，$p_{z}(z)$、$G(z)$是将噪音输入$z$映射到数据空间拟合真实图像后的分布，$D(x)$为得到真实数据（换言之，即辨别器无法分辨真假的数据）的概率。训练中需要取使得$D$最大的$x$分布，同时最小化伪造的概率$log(1-D(G(z)))$，以这一条件来训练生成器。

文章中严格证明了：
\begin{itemize}[itemindent=2em]
	\item 最优的生成器$G$存在满足$P_G=P_{data}$的唯一解，换言之当生成的图像分布与原数据分布近似的时候存在最优生成器。
	\item 最优辨别器需要满足$D(x)=\frac{P_{data}}{P_{data}+P_G}$，此时可以保证$V_(D,G)$能够取得唯一的极大值$0.5$。
	\item 只要有足够的训练数据和正确的环境，训练过程一定会收敛到最优。
\end{itemize}


\section{现行的主流年龄变化方案}
在Lifespan Age Transformation Synthesis之前，主流的年龄变化训练方案主要是为衰老的特定子因素建立单独的模型，其通常包含皱纹、纹理等代表性因素，同时着重于在离散的特定年龄下的转换。这些模型通常仅限于特定的域子集，即以风格或纹理差异为特征的同质域，换言之，这些转换常常基于风格迁移的思想。诸如DiscoGAN或CycleGAN一类的网络可以很好地完成这类图像翻译任务。在生成器部分，需要利用若干个卷积层构建编码器，用若干个卷积层构建解码器，同时在两者之间利用一个能够产生变化的深度网络来担当特征转换器。DiscoGAN使用CNN编码器和解码器，使用全连接网络当转换器，而CycleGAN则使用了ResNet充当转换器。\textsuperscript{\cite{2017Unpaired,2017Learning}}


基于此思路之上，基于CycleGAN实现的S2GAN在拟真性方面作出了改进，其通过抽象出身份信息，将个人的衰老基础以及传统年龄变换方案运用的群体化的特定年龄转变模式相结合，以生成具有个性化特征的人脸老化方案。S2GAN在编码器部分提取出个人的衰老模式作为个人特征，在解码器将人脸衰老特征解码，通过对几个年龄组进行加权得到目标图像，并在中间部分将线性组合系数与个人衰老特征相乘（而不是使用传统的连接）来完成年龄变化操作。\textsuperscript{\cite{2020S2GAN}}


然而以图像翻译作为年龄变换的主要思路，忽视了在年龄变化过程中头部发育带来的结构、形状变化，以及跨年龄段的外观变化问题。这也使得这些模型给出的年龄变换后的输出图像，相较于输入图像，往往只能呈现出在脸部各个子区域上的皮肤材质纹理（如皱纹）方面上的变化。


\section{另一种年龄变化方案}
可接下一级标题或正文。


论文要求主题明确、数据可靠、逻辑严密、文字精炼，遵守我国著作权法，注意保守国家机密。每篇论文（含图、表）不超过 10 个 page。其内容包括中英文题名、作者姓名、作者单位、摘要、关键词（不多于 5 个）、参考文献。另请在稿件首页地脚处给出第一作者和导师简介（包括姓名、出生年、性别、籍贯、职称、电子邮件，最后学位或在读学历）等信息。

\subsection{单击此处输入标题}
题名应恰当简明地反映文章的特定内容，要便于编制题录、索引和选定关键词。不宜使用非公知的缩略词、首字母缩写字符、代号等，也不能将原形词和缩略词同时列出；一般不用副题名，中、英文题名含义应一致。
\subsubsection{单击此处输入标题}
下接正文。页码采用 A4 纸型纵向排列，页边距上、下均为 3cm，左右均为 2.5cm。文字大小规定如下：摘要、作者简介、图名、表名及内容、参考文献均为小五号字，正文中除标题外均为五号字，标题见样例。中文均采用宋体，西文采用 Times New Roman 字体。


正文（含图、表）中的物理量和计量单位必须符合国家标准和国际标准。 \\
文中各级标题采用阿拉伯数字分三级编序，且一律左顶格排版。一级标题形如1，2，3，… 排序；二级标题形如1.1,1.2,…排序；三级标题形如1.1.1,1.1.2,…排序。
文中图、表应有自明性，且随文出现。图以10幅为限。图题、表题应附相应的中、英文名。图中文字、符号或坐标图中的标目、标值须写清。标目应使用符合国家标准的物理量和单位符号。


表格一般采用“三线表”，表的内容切忌与插图和文字内容重复。

\begin{table}[H]\footnotesize
\centering
\caption{中文表题居中(表随文出现)}
\begin{tabular}{ccccccccccc} %需要10列
\toprule %添加表格头部粗线
\multicolumn{3}{c}{\multirow{2}{*}{Method}}& \multicolumn{3}{c}{Homographic}& &\multicolumn{3}{c}{Hetergraphic}\\
\multicolumn{3}{c}{}&Precision&Recall&F1&&Precision&Recall&F1&\\  %有n个&，就表示该行有n+1列
\hline %绘制一条水平横线
\multicolumn{3}{c}{A}& 50& 0& 100& &200& 300& 300\\   % 占两列，列名为A；后面陆续跟着数字
\multicolumn{3}{c}{B}&100&100&0& &100&200&200\\
\multicolumn{3}{c}{C}&150&200&100& &0&100&200\\
\bottomrule %添加表格底部粗线
\end{tabular}
\end{table}

\section{代码实际运行结果}
由于设备原因，我们使用已经训练好的模型进行图像年龄转换。我们分别使用StarGAN（基于CycleGAN）与Lifespan Age Transformation Synthesis一文中提出网络，对S2GAN一文中使用的图片进行年龄转化.


原始图片如下：
\begin{figure}[H]
	\centering
	\includegraphics[scale=0.35]{assets/origin.png}
	\caption{原始图片}
\end{figure}


所得出的结果如下图：
\begin{figure}[H]
	\centering
	\includegraphics[scale=0.35]{assets/StarGAN.png}
	\caption{StarGAN，原始图片在最右侧}
\end{figure}


\begin{figure}[H]
	\centering
	\includegraphics[scale=0.35]{assets/S2GAN.png}
	\caption{S2GAN，原始图片在最左侧}
\end{figure}

\begin{figure}[H]
	\centering
	\includegraphics[scale=0.15]{assets/LATS.png}
	\caption{Lifespan Age Transformation Synthesis}
\end{figure}


\bibliographystyle{unsrt}
\bibliography{main}



% \newpage

\end{document}
%==================================================
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
